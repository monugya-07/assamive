{% extends 'main.html' %}

{% block content %}

{% load static %}

{% load cart %}

<hr>
<hr>
<hr>

<body>
    <hr>
    <section>
        <h2 class="text-center mb-4">running/walking</h2>
    </section>

    <div class="container">
        <div class="row">
            {% for product in products %}
            <div class="col-lg-4 col-md-6 mb-4" id="{{product.id}}">
                <img class="img-fluid p-3 w-10" src="{{product.image.url}}" alt="">
                <div class="box-element product p-4">
                    <h4><strong>{{product.name}}</strong></h4>
                    <h5 style="float: right;">â‚¹ : {{product.price}}</h5>

                    <!-- {{product | is_in_cart:request.session.cart}} -->

                    {% if product|is_in_cart:request.session.cart %}

                    <div class="card-footer p-0 nu-gutters">
                        <form action="/runningWalking/#{{product.id}}" class="col-2" method="POST">
                            {% csrf_token %}
                            <input hidden type="text" name="product" value='{{product.id}}'>
                            <input hidden type="text" name="remove" value='True'>

                            <input type="submit" value=" - " class="btn btn-primary btn-sm">
                        </form>
                        <div class="text-center col">quantity: {{ product|cart_quantity:request.session.cart }}</div>

                        <form action="/runningWalking/#{{product.id}}" class="col-2" method="POST">
                            {% csrf_token %}
                            <input hidden type="text" name="product" value='{{product.id}}'>
                            <input type="submit" value=" + " class="btn btn-primary btn-sm">
                        </form>
                    </div>
                    {% else %}
                    <form action="/runningWalking/#{{product.id}}" method="POST">
                        {% csrf_token %}
                        <input hidden type="text" name="product" value='{{product.id}}'>
                        <input type="submit" class="btn btn-primary btn-sm" value="add to cart"></a>
                    </form>
                    {% endif %}
                </div>

                <hr>
            </div>
            {% if forloop.counter|divisibleby:3 and not forloop.last %}
            <div class="w-100 d-none d-lg-block"></div>
            {% endif %}
            {% endfor %}
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>

</body>

{% endblock content %}